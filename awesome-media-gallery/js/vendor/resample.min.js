var Resample=function(t){function e(t,e,i,a){var o="string"==typeof t,r=o||t;o&&(r=new Image,r.onload=n,r.onerror=h),r._onresample=a,r._width=e,r._height=i,o?r.src=t:n.call(t)}function h(){throw"not found: "+this.src}function n(){var e=this,h=e._width,n=e._height,o=e._onresample,r=Math.min(e.height,e.width);null==h&&(h=a(e.width*n/e.height)),null==n&&(n=a(e.height*h/e.width)),delete e._onresample,delete e._width,delete e._height,t.width=h,t.height=n,i.drawImage(e,0,0,r,r,0,0,h,n),o(t.toDataURL("image/png"))}var i=t.getContext("2d"),a=Math.round;return e}(this.document.createElement("canvas"));